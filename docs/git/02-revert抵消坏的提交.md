---

## title: Git Revert æ•™ç¨‹

# ğŸŒ€ Git Revert â€”â€” ä¼˜é›…æ’¤å›å·²æ¨é€ Commit

åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¼šä¸å°å¿ƒæ¨é€äº†é”™è¯¯çš„ commitã€‚ä¸ºäº†ä¼˜é›…ã€å®‰å…¨åœ°æ’¤å›è¿™äº› commitï¼ŒGit æä¾›äº† `git revert` å‘½ä»¤ã€‚

ç›¸æ¯” `git reset`ï¼Œ`git revert` ä¸ä¼šæ”¹å†™å†å²ï¼Œéå¸¸é€‚åˆå¤šäººåä½œã€‚

---

## 1ï¸âƒ£ `git revert` æ˜¯ä»€ä¹ˆï¼Ÿ

`git revert <commit>` ä¼šåˆ›å»ºä¸€ä¸ª **æ–°çš„ commit**ï¼Œç”¨æ¥æŠµæ¶ˆæŒ‡å®š commitã€‚

åŸæ¥çš„ commit **ä¸ä¼šè¢«åˆ é™¤æˆ–ä¿®æ”¹**ï¼Œåªæ˜¯å¢åŠ äº†ä¸€ä¸ªåå‘æ“ä½œã€‚

```
åŸæ¥çš„ commit å†å²ï¼š
A --- B --- C  ï¼ˆC æ˜¯å commitï¼‰

æ‰§è¡Œ git revert C åï¼š
A --- B --- C --- C' ï¼ˆC' æ˜¯æŠµæ¶ˆ C çš„æ–° commitï¼‰
```

---

## 2ï¸âƒ£ åŸºæœ¬ç”¨æ³•

### å•ä¸ª Commit

```bash
# æŸ¥çœ‹å†å²
git log --oneline

# å‡è®¾å commit ä¸º abc1234
git revert abc1234
```

* Git ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª commit messageï¼Œå¦‚ `Revert "å commit çš„æè¿°"`ã€‚
* é»˜è®¤ä¼šè¿›å…¥ç¼–è¾‘å™¨ï¼Œä½ å¯ä»¥ä¿®æ”¹ commit message åä¿å­˜æäº¤ã€‚

---

### å¤šä¸ªè¿ç»­ Commit

```bash
git revert -n <oldest_commit>^..<newest_commit>
git commit -m "Revert several bad commits"
```

è¯´æ˜ï¼š

* `-n` æˆ– `--no-commit`ï¼šå…ˆæŠŠåå‘ä¿®æ”¹æ”¾åˆ°æš‚å­˜åŒºï¼Œä½†ä¸æäº¤ã€‚
* èŒƒå›´ `<oldest>^..<newest>` è¡¨ç¤ºä» oldest çš„çˆ¶ commit åˆ° newest ä¹‹é—´çš„ commitã€‚
* æ–¹ä¾¿ä¸€æ¬¡æ€§æ’¤é”€å¤šä¸ªè¿ç»­çš„å commitã€‚

---

### å†²çªå¤„ç†

* å¦‚æœè¢« revert çš„ commit ä¸å½“å‰ä»£ç å†²çªï¼Œä¼šå‡ºç° **å†²çªæç¤º**ã€‚
* è§£å†³å†²çªåæ‰§è¡Œï¼š

```bash
git add <å†²çªæ–‡ä»¶>
git commit
```

å®Œæˆ revertã€‚

---

## 3ï¸âƒ£ æ¨é€åˆ°è¿œç«¯

å› ä¸º `git revert` æ˜¯æ–°å¢ commitï¼Œä¸ä¿®æ”¹å†å²ï¼Œå¯ä»¥ç›´æ¥æ¨é€ï¼š

```bash
git push origin main
```

è¿œç«¯å°†çœ‹åˆ°ä¸€ä¸ªæ–°çš„ commitï¼Œå¦‚ï¼š

```
Revert "abc1234 å commit æè¿°"
```

---

## 4ï¸âƒ£ ä¸ºä»€ä¹ˆæ¨è `revert` è€Œä¸æ˜¯ `reset`ï¼Ÿ

| æ¯”è¾ƒé¡¹      | git revert | git reset + force push |
| -------- | ---------- | ---------------------- |
| å†å²æ˜¯å¦ä¿ç•™   | âœ… ä¿ç•™       | âŒ ä¼šé‡å†™                  |
| å¯¹å›¢é˜Ÿåä½œå®‰å…¨æ€§ | âœ… å®‰å…¨       | âŒ å¦‚æœåˆ«äººæ‹‰äº†å commitï¼Œä¼šå†²çª   |
| å¯è¿½æº¯æ€§     | âœ… å¯è¿½æº¯      | âŒ è¢« reset ååŸ commit æ¶ˆå¤± |
| æ“ä½œå¤æ‚åº¦    | ç®€å•         | éœ€è¦ force push + åè°ƒå›¢é˜Ÿ   |

---

## 5ï¸âƒ£ æ€»ç»“æµç¨‹

1. æ‰¾åˆ°å commit çš„ hashï¼š

```bash
git log --oneline
```

2. æ‰§è¡Œ revertï¼š

```bash
git revert <commit>
```

3. è§£å†³å¯èƒ½çš„å†²çªï¼Œæäº¤ revert commitã€‚
4. æ¨é€åˆ°è¿œç«¯ï¼š

```bash
git push origin main
```

âœ… **å®‰å…¨ã€ä¼˜é›…ã€å¯è¿½æº¯ï¼Œé€‚åˆå¤šäººåä½œã€‚**

---

## 6ï¸âƒ£ å¯è§†åŒ–ç¤ºæ„

```
å†å²çŠ¶æ€ï¼š
A --- B --- C  (å commit)

æ‰§è¡Œ git revert C åï¼š
A --- B --- C --- C'  (C' æŠµæ¶ˆ C)

å¦‚æœå¤šä¸ªè¿ç»­ commit åäº†ï¼š
A --- B --- C --- D --- E

git revert -n C^..E
git commit -m "Revert C-D-E"

ç»“æœï¼š
A --- B --- C --- D --- E --- R
(R æ˜¯ç»Ÿä¸€ç”Ÿæˆçš„åå‘ commit)
```

> âœ… ä½¿ç”¨è¯´æ˜ï¼š
>
> * è¾“å…¥ä½ æƒ³æ’¤å›çš„ commit hash
> * ç‚¹å‡»æŒ‰é’®ï¼Œé¡µé¢ä¼šæ˜¾ç¤ºå¯¹åº”çš„ `git revert <hash>` å‘½ä»¤
> * ç‚¹å‡»å¤åˆ¶æŒ‰é’®ï¼Œå¯ç›´æ¥å¤åˆ¶å‘½ä»¤åˆ°å‰ªè´´æ¿
> * å®Œå…¨åœ¨ VitePress å†…å¯äº¤äº’ï¼Œæ— éœ€é¢å¤–é¡µé¢

---

> ğŸ’¡ æç¤ºï¼š
>
> * æ°¸è¿œä¸è¦åœ¨å¤šäººåä½œçš„è¿œç«¯åˆ†æ”¯ä¸Šéšæ„ä½¿ç”¨ `reset --hard` + `push --force`ï¼Œé™¤éç¡®è®¤æ²¡äººåŸºäºå commit å·¥ä½œã€‚
> * `revert` æ˜¯æœ€å®‰å…¨çš„æ’¤å›æ–¹å¼ã€‚
