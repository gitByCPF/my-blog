# ğŸ” å†…éƒ¨ç±»ä¸åŒ¿åç±»

## å†…éƒ¨ç±»æ¦‚è¿°

å†…éƒ¨ç±»ï¼ˆInner Classï¼‰æ˜¯å®šä¹‰åœ¨å¦ä¸€ä¸ªç±»å†…éƒ¨çš„ç±»ã€‚Java æä¾›äº†å¤šç§ç±»å‹çš„å†…éƒ¨ç±»ï¼š

1. **æˆå‘˜å†…éƒ¨ç±»**ï¼ˆMember Inner Classï¼‰
2. **é™æ€å†…éƒ¨ç±»**ï¼ˆStatic Nested Classï¼‰
3. **å±€éƒ¨å†…éƒ¨ç±»**ï¼ˆLocal Inner Classï¼‰
4. **åŒ¿åå†…éƒ¨ç±»**ï¼ˆAnonymous Inner Classï¼‰

## æˆå‘˜å†…éƒ¨ç±»

### åŸºæœ¬è¯­æ³•

```java
public class Outer {
    private String outerField = "å¤–éƒ¨ç±»å­—æ®µ";
    
    // æˆå‘˜å†…éƒ¨ç±»
    public class Inner {
        private String innerField = "å†…éƒ¨ç±»å­—æ®µ";
        
        public void display() {
            System.out.println("å¤–éƒ¨ç±»å­—æ®µ: " + outerField);  // å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æˆå‘˜
            System.out.println("å†…éƒ¨ç±»å­—æ®µ: " + innerField);
        }
    }
    
    // åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡
    public void createInner() {
        Inner inner = new Inner();
        inner.display();
    }
}
```

### ä½¿ç”¨æˆå‘˜å†…éƒ¨ç±»

```java
// åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡
Outer outer = new Outer();
Outer.Inner inner = outer.new Inner();  // é€šè¿‡å¤–éƒ¨ç±»å¯¹è±¡åˆ›å»º
inner.display();

// æˆ–è€…
Outer.Inner inner2 = new Outer().new Inner();
```

### è®¿é—®å¤–éƒ¨ç±»æˆå‘˜

```java
public class Outer {
    private int outerVar = 10;
    
    public class Inner {
        private int innerVar = 20;
        
        public void method() {
            // è®¿é—®å¤–éƒ¨ç±»æˆå‘˜
            System.out.println("å¤–éƒ¨ç±»å˜é‡: " + outerVar);
            System.out.println("å¤–éƒ¨ç±»å˜é‡: " + Outer.this.outerVar);  // æ˜ç¡®æŒ‡å®š
            
            // è®¿é—®å†…éƒ¨ç±»æˆå‘˜
            System.out.println("å†…éƒ¨ç±»å˜é‡: " + innerVar);
            System.out.println("å†…éƒ¨ç±»å˜é‡: " + this.innerVar);
        }
    }
}
```

## é™æ€å†…éƒ¨ç±»

### åŸºæœ¬è¯­æ³•

```java
public class Outer {
    private static String staticField = "é™æ€å­—æ®µ";
    private String instanceField = "å®ä¾‹å­—æ®µ";
    
    // é™æ€å†…éƒ¨ç±»
    public static class StaticInner {
        public void display() {
            System.out.println("é™æ€å­—æ®µ: " + staticField);  // åªèƒ½è®¿é—®é™æ€æˆå‘˜
            // System.out.println(instanceField);  // âŒ é”™è¯¯ï¼šä¸èƒ½è®¿é—®å®ä¾‹æˆå‘˜
        }
        
        public static void staticMethod() {
            System.out.println("é™æ€å†…éƒ¨ç±»çš„é™æ€æ–¹æ³•");
        }
    }
}
```

### ä½¿ç”¨é™æ€å†…éƒ¨ç±»

```java
// ä¸éœ€è¦å¤–éƒ¨ç±»å¯¹è±¡ï¼Œç›´æ¥åˆ›å»º
Outer.StaticInner staticInner = new Outer.StaticInner();
staticInner.display();

// è°ƒç”¨é™æ€æ–¹æ³•
Outer.StaticInner.staticMethod();
```

## å±€éƒ¨å†…éƒ¨ç±»

### åŸºæœ¬è¯­æ³•

```java
public class Outer {
    private String outerField = "å¤–éƒ¨ç±»å­—æ®µ";
    
    public void method() {
        final String localVar = "å±€éƒ¨å˜é‡";  // å¿…é¡»æ˜¯ final æˆ– effectively final
        
        // å±€éƒ¨å†…éƒ¨ç±»
        class LocalInner {
            public void display() {
                System.out.println("å¤–éƒ¨ç±»å­—æ®µ: " + outerField);
                System.out.println("å±€éƒ¨å˜é‡: " + localVar);
            }
        }
        
        // åœ¨æ–¹æ³•å†…ä½¿ç”¨
        LocalInner localInner = new LocalInner();
        localInner.display();
    }
}
```

### å±€éƒ¨å†…éƒ¨ç±»çš„é™åˆ¶

```java
public class Outer {
    public void method() {
        // å±€éƒ¨å†…éƒ¨ç±»ä¸èƒ½æœ‰è®¿é—®ä¿®é¥°ç¬¦
        class LocalInner {
            // âŒ public class LocalInner { }  // é”™è¯¯
            
            // å±€éƒ¨å†…éƒ¨ç±»ä¸èƒ½æœ‰é™æ€æˆå‘˜ï¼ˆJava 16+ å…è®¸ï¼‰
            // static int staticVar = 10;  // Java 16 ä¹‹å‰é”™è¯¯
        }
    }
}
```

## åŒ¿åå†…éƒ¨ç±»

### åŸºæœ¬è¯­æ³•

```java
// å®ç°æ¥å£
interface Greeting {
    void greet(String name);
}

public class Outer {
    public void method() {
        // åŒ¿åå†…éƒ¨ç±»
        Greeting greeting = new Greeting() {
            @Override
            public void greet(String name) {
                System.out.println("Hello, " + name);
            }
        };
        
        greeting.greet("å¼ ä¸‰");
    }
}
```

### ç»§æ‰¿ç±»çš„åŒ¿åå†…éƒ¨ç±»

```java
public class Animal {
    public void makeSound() {
        System.out.println("åŠ¨ç‰©å‘å‡ºå£°éŸ³");
    }
}

public class Outer {
    public void method() {
        // åŒ¿åå†…éƒ¨ç±»ç»§æ‰¿ Animal
        Animal animal = new Animal() {
            @Override
            public void makeSound() {
                System.out.println("åŒ¿ååŠ¨ç‰©å‘å‡ºå£°éŸ³");
            }
        };
        
        animal.makeSound();
    }
}
```

### Lambda è¡¨è¾¾å¼ï¼ˆJava 8+ï¼‰

```java
// å‡½æ•°å¼æ¥å£
interface Calculator {
    int calculate(int a, int b);
}

public class Outer {
    public void method() {
        // ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»
        Calculator calc1 = new Calculator() {
            @Override
            public int calculate(int a, int b) {
                return a + b;
            }
        };
        
        // ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼ˆæ›´ç®€æ´ï¼‰
        Calculator calc2 = (a, b) -> a + b;
        
        System.out.println(calc1.calculate(5, 3));  // 8
        System.out.println(calc2.calculate(5, 3));  // 8
    }
}
```

## å†…éƒ¨ç±»çš„åº”ç”¨åœºæ™¯

### 1. äº‹ä»¶å¤„ç†

```java
public class Button {
    private String text;
    private OnClickListener listener;
    
    public interface OnClickListener {
        void onClick();
    }
    
    public void setOnClickListener(OnClickListener listener) {
        this.listener = listener;
    }
    
    public void click() {
        if (listener != null) {
            listener.onClick();
        }
    }
}

// ä½¿ç”¨
Button button = new Button();
button.setOnClickListener(new Button.OnClickListener() {
    @Override
    public void onClick() {
        System.out.println("æŒ‰é’®è¢«ç‚¹å‡»");
    }
});
```

### 2. è¿­ä»£å™¨å®ç°

```java
public class MyList {
    private String[] items = {"a", "b", "c"};
    
    public Iterator<String> iterator() {
        return new Iterator<String>() {
            private int index = 0;
            
            @Override
            public boolean hasNext() {
                return index < items.length;
            }
            
            @Override
            public String next() {
                return items[index++];
            }
        };
    }
}
```

### 3. è¾…åŠ©ç±»å°è£…

```java
public class Outer {
    private String data;
    
    // ä½¿ç”¨é™æ€å†…éƒ¨ç±»å°è£…ç›¸å…³çš„è¾…åŠ©ç±»
    public static class Builder {
        private String data;
        
        public Builder setData(String data) {
            this.data = data;
            return this;
        }
        
        public Outer build() {
            Outer outer = new Outer();
            outer.data = this.data;
            return outer;
        }
    }
}

// ä½¿ç”¨
Outer outer = new Outer.Builder()
    .setData("æ•°æ®")
    .build();
```

## å†…éƒ¨ç±»çš„ä¼˜åŠ¿

### 1. è®¿é—®æ§åˆ¶

```java
public class Outer {
    private String privateField = "ç§æœ‰å­—æ®µ";
    
    // å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„ç§æœ‰æˆå‘˜
    public class Inner {
        public void accessPrivate() {
            System.out.println(privateField);  // âœ… å¯ä»¥è®¿é—®
        }
    }
}
```

### 2. ä»£ç ç»„ç»‡

```java
// å°†ç›¸å…³çš„ç±»ç»„ç»‡åœ¨ä¸€èµ·
public class LinkedList {
    // èŠ‚ç‚¹ç±»ä½œä¸ºå†…éƒ¨ç±»æ›´åˆç†
    private static class Node {
        Object data;
        Node next;
        
        Node(Object data) {
            this.data = data;
        }
    }
    
    private Node head;
}
```

### 3. å®ç°å›è°ƒ

```java
public class EventHandler {
    public void handleEvent(Event event) {
        // ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»å®ç°å›è°ƒ
        event.setOnComplete(new Callback() {
            @Override
            public void onComplete() {
                System.out.println("äº‹ä»¶å®Œæˆ");
            }
        });
    }
}
```

## å®Œæ•´ç¤ºä¾‹

```java
// å¤–éƒ¨ç±»
public class Outer {
    private String outerField = "å¤–éƒ¨ç±»å­—æ®µ";
    private static String staticField = "é™æ€å­—æ®µ";
    
    // æˆå‘˜å†…éƒ¨ç±»
    public class MemberInner {
        public void display() {
            System.out.println("æˆå‘˜å†…éƒ¨ç±»è®¿é—®: " + outerField);
        }
    }
    
    // é™æ€å†…éƒ¨ç±»
    public static class StaticInner {
        public void display() {
            System.out.println("é™æ€å†…éƒ¨ç±»è®¿é—®: " + staticField);
        }
    }
    
    // æ–¹æ³•ä¸­ä½¿ç”¨å±€éƒ¨å†…éƒ¨ç±»
    public void methodWithLocalInner() {
        final String localVar = "å±€éƒ¨å˜é‡";
        
        class LocalInner {
            public void display() {
                System.out.println("å±€éƒ¨å†…éƒ¨ç±»è®¿é—®: " + outerField);
                System.out.println("å±€éƒ¨å˜é‡: " + localVar);
            }
        }
        
        LocalInner localInner = new LocalInner();
        localInner.display();
    }
    
    // æ–¹æ³•ä¸­ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»
    public void methodWithAnonymous() {
        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                System.out.println("åŒ¿åå†…éƒ¨ç±»æ‰§è¡Œ");
            }
        };
        
        new Thread(runnable).start();
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class InnerClassExample {
    public static void main(String[] args) {
        Outer outer = new Outer();
        
        // æˆå‘˜å†…éƒ¨ç±»
        Outer.MemberInner memberInner = outer.new MemberInner();
        memberInner.display();
        
        // é™æ€å†…éƒ¨ç±»
        Outer.StaticInner staticInner = new Outer.StaticInner();
        staticInner.display();
        
        // å±€éƒ¨å†…éƒ¨ç±»
        outer.methodWithLocalInner();
        
        // åŒ¿åå†…éƒ¨ç±»
        outer.methodWithAnonymous();
    }
}
```

## æ³¨æ„äº‹é¡¹

### 1. æˆå‘˜å†…éƒ¨ç±»ä¸èƒ½æœ‰é™æ€æˆå‘˜ï¼ˆJava 16+ å…è®¸ï¼‰

```java
public class Outer {
    public class Inner {
        // âŒ Java 16 ä¹‹å‰é”™è¯¯
        // static int staticVar = 10;
        
        // âœ… Java 16+ å…è®¸
        static int staticVar = 10;
    }
}
```

### 2. å±€éƒ¨å˜é‡å¿…é¡»æ˜¯ final æˆ– effectively final

```java
public void method() {
    final String finalVar = "final";  // âœ… å¯ä»¥
    String effectivelyFinal = "effectively final";  // âœ… å¯ä»¥ï¼ˆåªèµ‹å€¼ä¸€æ¬¡ï¼‰
    // String notFinal = "not final";  // âŒ é”™è¯¯ï¼ˆå¦‚æœå¤šæ¬¡èµ‹å€¼ï¼‰
    
    class LocalInner {
        public void display() {
            System.out.println(finalVar);  // âœ… å¯ä»¥
            System.out.println(effectivelyFinal);  // âœ… å¯ä»¥
        }
    }
}
```

### 3. å†…éƒ¨ç±»ä¸å¤–éƒ¨ç±»çš„ this

```java
public class Outer {
    private String name = "Outer";
    
    public class Inner {
        private String name = "Inner";
        
        public void display() {
            System.out.println(this.name);           // Inner
            System.out.println(Outer.this.name);      // Outer
        }
    }
}
```

## æœ€ä½³å®è·µ

### 1. ä¼˜å…ˆä½¿ç”¨é™æ€å†…éƒ¨ç±»

```java
// âœ… å¦‚æœä¸è®¿é—®å¤–éƒ¨ç±»å®ä¾‹æˆå‘˜ï¼Œä½¿ç”¨é™æ€å†…éƒ¨ç±»
public class Outer {
    public static class StaticInner {
        // ä¸ä¾èµ–å¤–éƒ¨ç±»å®ä¾‹
    }
}

// âŒ å¦‚æœä¸å¿…è¦ï¼Œé¿å…ä½¿ç”¨æˆå‘˜å†…éƒ¨ç±»ï¼ˆéœ€è¦å¤–éƒ¨ç±»å®ä¾‹ï¼‰
```

### 2. ä½¿ç”¨ Lambda æ›¿ä»£åŒ¿åå†…éƒ¨ç±»

```java
// âœ… Java 8+ ä½¿ç”¨ Lambda
Runnable r = () -> System.out.println("Hello");

// âŒ ä¸ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼ˆå¦‚æœå¯ä»¥ç”¨ Lambdaï¼‰
Runnable r = new Runnable() {
    @Override
    public void run() {
        System.out.println("Hello");
    }
};
```

### 3. åˆç†ä½¿ç”¨å†…éƒ¨ç±»

```java
// âœ… å†…éƒ¨ç±»ç”¨äºå°è£…ç›¸å…³åŠŸèƒ½
public class LinkedList {
    private static class Node {
        // èŠ‚ç‚¹ç±»åªä¸é“¾è¡¨ç›¸å…³
    }
}

// âŒ é¿å…è¿‡åº¦åµŒå¥—
```

## ä¸‹ä¸€æ­¥

æŒæ¡äº†å†…éƒ¨ç±»ä¸åŒ¿åç±»åï¼Œå¯ä»¥ç»§ç»­å­¦ä¹ ï¼š

- [å¸¸ç”¨ç±»ä¸å­—ç¬¦ä¸²å¤„ç†](/java/11-å¸¸ç”¨ç±»ä¸å­—ç¬¦ä¸²å¤„ç†.md) - å­¦ä¹  Java å¸¸ç”¨ç±»åº“
- [æ•°ç»„ä¸é›†åˆ](/java/12-æ•°ç»„ä¸é›†åˆ.md) - å­¦ä¹ æ•°æ®ç»“æ„çš„ä½¿ç”¨

---

<div style="text-align: center; margin-top: 2rem;">
  <p>ğŸ’¡ <strong>æç¤º</strong>ï¼šå†…éƒ¨ç±»å’ŒåŒ¿åç±»æä¾›äº†ä»£ç ç»„ç»‡å’ŒåŠŸèƒ½å°è£…çš„æœ‰åŠ›å·¥å…·ï¼Œä½†è¦åˆç†ä½¿ç”¨ï¼Œé¿å…è¿‡åº¦å¤æ‚</p>
</div>
