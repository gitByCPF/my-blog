# ğŸ”§ å¹¶å‘å·¥å…·ç±»

## å¹¶å‘å·¥å…·ç±»æ¦‚è¿°

Java 5 å¼•å…¥çš„ `java.util.concurrent` åŒ…æä¾›äº†ä¸°å¯Œçš„å¹¶å‘å·¥å…·ç±»ï¼Œç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚

## ExecutorService

### çº¿ç¨‹æ± 

```java
// åˆ›å»ºçº¿ç¨‹æ± 
ExecutorService executor = Executors.newFixedThreadPool(5);

// æäº¤ä»»åŠ¡
executor.submit(() -> {
    System.out.println("ä»»åŠ¡æ‰§è¡Œ");
});

// å…³é—­çº¿ç¨‹æ± 
executor.shutdown();
```

### å¸¸ç”¨çº¿ç¨‹æ± ç±»å‹

```java
// å›ºå®šå¤§å°çº¿ç¨‹æ± 
ExecutorService fixedPool = Executors.newFixedThreadPool(5);

// å•çº¿ç¨‹æ± 
ExecutorService singlePool = Executors.newSingleThreadExecutor();

// ç¼“å­˜çº¿ç¨‹æ± 
ExecutorService cachedPool = Executors.newCachedThreadPool();

// å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± 
ScheduledExecutorService scheduledPool = Executors.newScheduledThreadPool(5);
```

## Future å’Œ Callable

```java
// ä½¿ç”¨ Callable æäº¤ä»»åŠ¡
ExecutorService executor = Executors.newFixedThreadPool(5);

Future<Integer> future = executor.submit(() -> {
    Thread.sleep(1000);
    return 42;
});

// è·å–ç»“æœ
try {
    Integer result = future.get();  // é˜»å¡ç­‰å¾…ç»“æœ
    System.out.println("ç»“æœ: " + result);
} catch (InterruptedException | ExecutionException e) {
    e.printStackTrace();
}
```

## CountDownLatch

```java
// å€’è®¡æ—¶é—¨é—©
CountDownLatch latch = new CountDownLatch(3);

// å¤šä¸ªçº¿ç¨‹
for (int i = 0; i < 3; i++) {
    new Thread(() -> {
        // æ‰§è¡Œä»»åŠ¡
        latch.countDown();  // è®¡æ•°å‡1
    }).start();
}

// ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ
latch.await();
System.out.println("æ‰€æœ‰ä»»åŠ¡å®Œæˆ");
```

## CyclicBarrier

```java
// å¾ªç¯å±éšœ
CyclicBarrier barrier = new CyclicBarrier(3, () -> {
    System.out.println("æ‰€æœ‰çº¿ç¨‹åˆ°è¾¾å±éšœ");
});

// å¤šä¸ªçº¿ç¨‹
for (int i = 0; i < 3; i++) {
    new Thread(() -> {
        try {
            // æ‰§è¡Œä»»åŠ¡
            barrier.await();  // ç­‰å¾…æ‰€æœ‰çº¿ç¨‹åˆ°è¾¾
        } catch (InterruptedException | BrokenBarrierException e) {
            e.printStackTrace();
        }
    }).start();
}
```

## Semaphore

```java
// ä¿¡å·é‡
Semaphore semaphore = new Semaphore(3);  // æœ€å¤š3ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®

// å¤šä¸ªçº¿ç¨‹
for (int i = 0; i < 10; i++) {
    new Thread(() -> {
        try {
            semaphore.acquire();  // è·å–è®¸å¯
            // æ‰§è¡Œä»»åŠ¡
            semaphore.release();  // é‡Šæ”¾è®¸å¯
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }).start();
}
```

## ä¸‹ä¸€æ­¥

æŒæ¡äº†å¹¶å‘å·¥å…·ç±»åï¼Œå¯ä»¥ç»§ç»­å­¦ä¹ ï¼š

- [JVM åŸºç¡€](/java/20-JVMåŸºç¡€.md) - å­¦ä¹  JVM åŸç†
- [Java 8+ æ–°ç‰¹æ€§](/java/21-Java8+æ–°ç‰¹æ€§.md) - å­¦ä¹  Java æ–°ç‰¹æ€§

---

<div style="text-align: center; margin-top: 2rem;">
  <p>ğŸ’¡ <strong>æç¤º</strong>ï¼šå¹¶å‘å·¥å…·ç±»æä¾›äº†æ›´é«˜çº§çš„å¹¶å‘æ§åˆ¶ï¼Œåˆç†ä½¿ç”¨å¯ä»¥æé«˜ç¨‹åºæ€§èƒ½</p>
</div>
