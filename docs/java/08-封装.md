# ğŸ”’ å°è£…

## å°è£…æ¦‚è¿°

å°è£…ï¼ˆEncapsulationï¼‰æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒéšè—äº†å¯¹è±¡çš„å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œåªå¯¹å¤–æä¾›å¿…è¦çš„æ¥å£ã€‚

### å°è£…çš„ç›®çš„

- **éšè—å®ç°ç»†èŠ‚**ï¼šä¿æŠ¤å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€
- **æé«˜å®‰å…¨æ€§**ï¼šé˜²æ­¢å¤–éƒ¨ç›´æ¥è®¿é—®å’Œä¿®æ”¹
- **ä¾¿äºç»´æŠ¤**ï¼šä¿®æ”¹å†…éƒ¨å®ç°ä¸å½±å“å¤–éƒ¨ä½¿ç”¨
- **æé«˜å¯è¯»æ€§**ï¼šæ¸…æ™°çš„æ¥å£ï¼Œæ˜“äºç†è§£

## å°è£…çš„å®ç°

### ä½¿ç”¨è®¿é—®ä¿®é¥°ç¬¦

```java
public class BankAccount {
    // privateï¼šç§æœ‰æˆå‘˜ï¼Œåªèƒ½åœ¨ç±»å†…è®¿é—®
    private String accountNumber;
    private double balance;
    
    // publicï¼šå…¬å…±æ–¹æ³•ï¼Œæä¾›è®¿é—®æ¥å£
    public BankAccount(String accountNumber, double initialBalance) {
        this.accountNumber = accountNumber;
        if (initialBalance >= 0) {
            this.balance = initialBalance;
        } else {
            this.balance = 0;
        }
    }
    
    // Getter æ–¹æ³•ï¼šè·å–è´¦æˆ·å·ç ï¼ˆåªè¯»ï¼‰
    public String getAccountNumber() {
        return accountNumber;
    }
    
    // Getter æ–¹æ³•ï¼šè·å–ä½™é¢ï¼ˆåªè¯»ï¼‰
    public double getBalance() {
        return balance;
    }
    
    // å­˜æ¬¾æ–¹æ³•ï¼šæä¾›å—æ§çš„ä¿®æ”¹æ¥å£
    public void deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            System.out.println("å­˜æ¬¾æˆåŠŸï¼Œé‡‘é¢: " + amount);
        } else {
            System.out.println("å­˜æ¬¾é‡‘é¢å¿…é¡»å¤§äº 0");
        }
    }
    
    // å–æ¬¾æ–¹æ³•ï¼šæä¾›å—æ§çš„ä¿®æ”¹æ¥å£
    public boolean withdraw(double amount) {
        if (amount > 0 && amount <= balance) {
            balance -= amount;
            System.out.println("å–æ¬¾æˆåŠŸï¼Œé‡‘é¢: " + amount);
            return true;
        } else {
            System.out.println("å–æ¬¾å¤±è´¥ï¼šä½™é¢ä¸è¶³æˆ–é‡‘é¢æ— æ•ˆ");
            return false;
        }
    }
}
```

## è®¿é—®ä¿®é¥°ç¬¦è¯¦è§£

### privateï¼ˆç§æœ‰ï¼‰

åªèƒ½åœ¨ç±»å†…è®¿é—®ï¼š

```java
public class Example {
    private int privateVar = 10;
    
    private void privateMethod() {
        System.out.println("ç§æœ‰æ–¹æ³•");
    }
    
    public void publicMethod() {
        System.out.println(privateVar);  // âœ… å¯ä»¥è®¿é—®
        privateMethod();                 // âœ… å¯ä»¥è°ƒç”¨
    }
}

// åœ¨å…¶ä»–ç±»ä¸­
Example e = new Example();
// e.privateVar;      // âŒ ç¼–è¯‘é”™è¯¯
// e.privateMethod();  // âŒ ç¼–è¯‘é”™è¯¯
```

### defaultï¼ˆåŒ…è®¿é—®ï¼‰

åŒä¸€ä¸ªåŒ…å†…å¯ä»¥è®¿é—®ï¼š

```java
package com.example;

public class Example {
    int defaultVar = 10;  // é»˜è®¤è®¿é—®ä¿®é¥°ç¬¦
    
    void defaultMethod() {
        System.out.println("é»˜è®¤æ–¹æ³•");
    }
}

// åŒä¸€ä¸ªåŒ…å†…çš„å…¶ä»–ç±»
package com.example;

public class AnotherClass {
    public void method() {
        Example e = new Example();
        System.out.println(e.defaultVar);  // âœ… å¯ä»¥è®¿é—®
        e.defaultMethod();                 // âœ… å¯ä»¥è°ƒç”¨
    }
}
```

### protectedï¼ˆå—ä¿æŠ¤ï¼‰

åŒ…å†…å’Œå­ç±»å¯ä»¥è®¿é—®ï¼š

```java
package com.example;

public class Parent {
    protected int protectedVar = 10;
    
    protected void protectedMethod() {
        System.out.println("å—ä¿æŠ¤æ–¹æ³•");
    }
}

// å­ç±»ï¼ˆå¯ä»¥è®¿é—®ï¼‰
package com.example;

public class Child extends Parent {
    public void method() {
        System.out.println(protectedVar);  // âœ… å¯ä»¥è®¿é—®
        protectedMethod();                 // âœ… å¯ä»¥è°ƒç”¨
    }
}
```

### publicï¼ˆå…¬å…±ï¼‰

æ‰€æœ‰åœ°æ–¹éƒ½å¯ä»¥è®¿é—®ï¼š

```java
public class Example {
    public int publicVar = 10;
    
    public void publicMethod() {
        System.out.println("å…¬å…±æ–¹æ³•");
    }
}

// ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®
Example e = new Example();
System.out.println(e.publicVar);  // âœ… å¯ä»¥è®¿é—®
e.publicMethod();                 // âœ… å¯ä»¥è°ƒç”¨
```

## Getter å’Œ Setter æ–¹æ³•

### åŸºæœ¬ Getter/Setter

```java
public class Person {
    private String name;
    private int age;
    
    // Getter æ–¹æ³•
    public String getName() {
        return name;
    }
    
    public int getAge() {
        return age;
    }
    
    // Setter æ–¹æ³•
    public void setName(String name) {
        this.name = name;
    }
    
    public void setAge(int age) {
        this.age = age;
    }
}
```

### å¸¦éªŒè¯çš„ Setter

```java
public class Student {
    private String name;
    private int age;
    private double score;
    
    public void setName(String name) {
        if (name != null && !name.trim().isEmpty()) {
            this.name = name;
        } else {
            throw new IllegalArgumentException("å§“åä¸èƒ½ä¸ºç©º");
        }
    }
    
    public void setAge(int age) {
        if (age >= 0 && age <= 150) {
            this.age = age;
        } else {
            throw new IllegalArgumentException("å¹´é¾„å¿…é¡»åœ¨ 0-150 ä¹‹é—´");
        }
    }
    
    public void setScore(double score) {
        if (score >= 0 && score <= 100) {
            this.score = score;
        } else {
            throw new IllegalArgumentException("åˆ†æ•°å¿…é¡»åœ¨ 0-100 ä¹‹é—´");
        }
    }
}
```

### åªè¯»å±æ€§

```java
public class Circle {
    private final double radius;  // final ä¿®é¥°ï¼Œä¸å¯ä¿®æ”¹
    private final double area;   // è®¡ç®—å±æ€§
    
    public Circle(double radius) {
        this.radius = radius;
        this.area = Math.PI * radius * radius;
    }
    
    // åªæä¾› Getterï¼Œä¸æä¾› Setter
    public double getRadius() {
        return radius;
    }
    
    public double getArea() {
        return area;
    }
}
```

## æ•°æ®éªŒè¯

### è¾“å…¥éªŒè¯

```java
public class Product {
    private String name;
    private double price;
    private int stock;
    
    public void setName(String name) {
        if (name == null || name.trim().isEmpty()) {
            throw new IllegalArgumentException("äº§å“åç§°ä¸èƒ½ä¸ºç©º");
        }
        if (name.length() > 100) {
            throw new IllegalArgumentException("äº§å“åç§°ä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦");
        }
        this.name = name;
    }
    
    public void setPrice(double price) {
        if (price < 0) {
            throw new IllegalArgumentException("ä»·æ ¼ä¸èƒ½ä¸ºè´Ÿæ•°");
        }
        this.price = price;
    }
    
    public void setStock(int stock) {
        if (stock < 0) {
            throw new IllegalArgumentException("åº“å­˜ä¸èƒ½ä¸ºè´Ÿæ•°");
        }
        this.stock = stock;
    }
}
```

### ä¸šåŠ¡è§„åˆ™éªŒè¯

```java
public class BankAccount {
    private double balance;
    private static final double MIN_BALANCE = 0;
    private static final double MAX_BALANCE = 1000000;
    
    public void deposit(double amount) {
        if (amount <= 0) {
            throw new IllegalArgumentException("å­˜æ¬¾é‡‘é¢å¿…é¡»å¤§äº 0");
        }
        if (balance + amount > MAX_BALANCE) {
            throw new IllegalArgumentException("è´¦æˆ·ä½™é¢ä¸èƒ½è¶…è¿‡ " + MAX_BALANCE);
        }
        balance += amount;
    }
    
    public void withdraw(double amount) {
        if (amount <= 0) {
            throw new IllegalArgumentException("å–æ¬¾é‡‘é¢å¿…é¡»å¤§äº 0");
        }
        if (balance - amount < MIN_BALANCE) {
            throw new IllegalArgumentException("ä½™é¢ä¸è¶³");
        }
        balance -= amount;
    }
}
```

## å°è£…çš„å¥½å¤„

### 1. æ•°æ®ä¿æŠ¤

```java
// ä¸å°è£…çš„é—®é¢˜
public class BadExample {
    public int age;
}

// ä½¿ç”¨
BadExample e = new BadExample();
e.age = -100;  // âŒ å¯ä»¥è®¾ç½®æ— æ•ˆå€¼

// å°è£…çš„å¥½å¤„
public class GoodExample {
    private int age;
    
    public void setAge(int age) {
        if (age >= 0 && age <= 150) {
            this.age = age;
        } else {
            throw new IllegalArgumentException("æ— æ•ˆçš„å¹´é¾„");
        }
    }
}
```

### 2. å®ç°ç»†èŠ‚éšè—

```java
public class Stack {
    private List<Integer> list = new ArrayList<>();  // å†…éƒ¨ä½¿ç”¨ ArrayList
    
    public void push(int value) {
        list.add(value);
    }
    
    public int pop() {
        if (list.isEmpty()) {
            throw new RuntimeException("æ ˆä¸ºç©º");
        }
        return list.remove(list.size() - 1);
    }
    
    public boolean isEmpty() {
        return list.isEmpty();
    }
}

// ä½¿ç”¨æ–¹ä¸éœ€è¦çŸ¥é“å†…éƒ¨ä½¿ç”¨ ArrayList
// ä»¥åå¯ä»¥æ”¹ä¸º LinkedListï¼Œä¸å½±å“ä½¿ç”¨æ–¹
```

### 3. æ˜“äºç»´æŠ¤

```java
public class User {
    private String firstName;
    private String lastName;
    
    // æ—§ç‰ˆæœ¬ï¼šè¿”å›ç»„åˆå­—ç¬¦ä¸²
    public String getName() {
        return firstName + " " + lastName;
    }
    
    // æ–°ç‰ˆæœ¬ï¼šå¯ä»¥ä¿®æ”¹è¿”å›æ ¼å¼ï¼Œä¸å½±å“ä½¿ç”¨æ–¹
    public String getName() {
        return lastName + ", " + firstName;  // ä¿®æ”¹æ ¼å¼
    }
}
```

## å®Œæ•´ç¤ºä¾‹

```java
public class EncapsulationExample {
    public static void main(String[] args) {
        // é“¶è¡Œè´¦æˆ·ç¤ºä¾‹
        BankAccount account = new BankAccount("123456", 1000);
        
        System.out.println("è´¦æˆ·å·ç : " + account.getAccountNumber());
        System.out.println("åˆå§‹ä½™é¢: " + account.getBalance());
        
        account.deposit(500);
        System.out.println("å­˜æ¬¾åä½™é¢: " + account.getBalance());
        
        account.withdraw(200);
        System.out.println("å–æ¬¾åä½™é¢: " + account.getBalance());
        
        // å°è¯•æ— æ•ˆæ“ä½œ
        account.withdraw(2000);  // ä½™é¢ä¸è¶³
        account.deposit(-100);   // æ— æ•ˆé‡‘é¢
    }
}

class BankAccount {
    private String accountNumber;
    private double balance;
    
    public BankAccount(String accountNumber, double initialBalance) {
        this.accountNumber = accountNumber;
        if (initialBalance >= 0) {
            this.balance = initialBalance;
        } else {
            this.balance = 0;
        }
    }
    
    public String getAccountNumber() {
        return accountNumber;
    }
    
    public double getBalance() {
        return balance;
    }
    
    public void deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            System.out.println("å­˜æ¬¾æˆåŠŸï¼Œé‡‘é¢: " + amount);
        } else {
            System.out.println("å­˜æ¬¾é‡‘é¢å¿…é¡»å¤§äº 0");
        }
    }
    
    public boolean withdraw(double amount) {
        if (amount > 0 && amount <= balance) {
            balance -= amount;
            System.out.println("å–æ¬¾æˆåŠŸï¼Œé‡‘é¢: " + amount);
            return true;
        } else {
            System.out.println("å–æ¬¾å¤±è´¥ï¼šä½™é¢ä¸è¶³æˆ–é‡‘é¢æ— æ•ˆ");
            return false;
        }
    }
}
```

## æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ private ä¿®é¥°æˆå‘˜å˜é‡

```java
// âœ… å¥½çš„åšæ³•
public class GoodExample {
    private String name;
    private int age;
}

// âŒ ä¸å¥½çš„åšæ³•
public class BadExample {
    public String name;  // åº”è¯¥ä½¿ç”¨ private
    public int age;
}
```

### 2. æä¾›å¿…è¦çš„ Getter/Setter

```java
// âœ… å¥½çš„åšæ³•ï¼šæä¾›å—æ§è®¿é—®
public class GoodExample {
    private String name;
    
    public String getName() {
        return name;
    }
    
    public void setName(String name) {
        if (name != null && !name.isEmpty()) {
            this.name = name;
        }
    }
}
```

### 3. åœ¨ Setter ä¸­æ·»åŠ éªŒè¯

```java
// âœ… å¥½çš„åšæ³•ï¼šæ·»åŠ éªŒè¯
public void setAge(int age) {
    if (age >= 0 && age <= 150) {
        this.age = age;
    } else {
        throw new IllegalArgumentException("å¹´é¾„æ— æ•ˆ");
    }
}
```

### 4. ä½¿ç”¨ final ä¿æŠ¤ä¸å¯å˜å±æ€§

```java
// âœ… å¥½çš„åšæ³•ï¼šä½¿ç”¨ final
public class ImmutableExample {
    private final String name;  // ä¸å¯å˜
    private final int age;      // ä¸å¯å˜
    
    public ImmutableExample(String name, int age) {
        this.name = name;
        this.age = age;
    }
    
    // åªæä¾› Getterï¼Œä¸æä¾› Setter
    public String getName() {
        return name;
    }
}
```

## å¸¸è§é”™è¯¯

### 1. å¿˜è®°å°è£…

```java
// âŒ é”™è¯¯ï¼šç›´æ¥æš´éœ²å­—æ®µ
public class BadExample {
    public String name;
    public int age;
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨å°è£…
public class GoodExample {
    private String name;
    private int age;
    
    public String getName() {
        return name;
    }
    
    public void setName(String name) {
        this.name = name;
    }
}
```

### 2. Setter ä¸­æ²¡æœ‰éªŒè¯

```java
// âŒ é”™è¯¯ï¼šæ²¡æœ‰éªŒè¯
public void setAge(int age) {
    this.age = age;  // å¯ä»¥è®¾ç½®ä»»ä½•å€¼
}

// âœ… æ­£ç¡®ï¼šæ·»åŠ éªŒè¯
public void setAge(int age) {
    if (age >= 0 && age <= 150) {
        this.age = age;
    } else {
        throw new IllegalArgumentException("å¹´é¾„æ— æ•ˆ");
    }
}
```

## ä¸‹ä¸€æ­¥

æŒæ¡äº†å°è£…åï¼Œå¯ä»¥ç»§ç»­å­¦ä¹ ï¼š

- [ç»§æ‰¿](/java/09-ç»§æ‰¿.md) - å­¦ä¹ ç±»çš„ç»§æ‰¿å…³ç³»
- [å¤šæ€](/java/10-å¤šæ€.md) - ç†è§£å¤šæ€çš„å®ç°
- [å†…éƒ¨ç±»ä¸åŒ¿åç±»](/java/11-å†…éƒ¨ç±»ä¸åŒ¿åç±».md) - å­¦ä¹ ç‰¹æ®Šçš„ç±»å®šä¹‰æ–¹å¼

---

<div style="text-align: center; margin-top: 2rem;">
  <p>ğŸ’¡ <strong>æç¤º</strong>ï¼šå°è£…æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºç¡€ï¼Œè‰¯å¥½çš„å°è£…å¯ä»¥ä¿æŠ¤æ•°æ®ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå®‰å…¨æ€§</p>
</div>
