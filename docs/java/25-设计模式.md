# ğŸ¨ è®¾è®¡æ¨¡å¼ï¼ˆ24ç§ï¼Œå›¾ç¤º + å®æˆ˜ï¼‰

è®¾è®¡æ¨¡å¼æ˜¯æŠ½è±¡çš„ç»éªŒæ€»ç»“ã€‚å»ºè®®ä»¥â€œä½•æ—¶ç”¨ã€ä¸ºä»€ä¹ˆã€å¦‚ä½•è½åœ°â€ä¸ºä¸»çº¿ç†è§£ï¼Œæ¯ç§æ¨¡å¼éƒ½åŒ…å«ï¼šæœ¬è´¨ã€ASCII å›¾ç¤ºã€ç®€æ˜ä»£ç ä¸å®è·µæç¤ºã€‚

```
ä¸‰å¤§ç±»ï¼š
åˆ›å»ºå‹ï¼ˆ5ï¼‰ï¼šå•ä¾‹ã€å·¥å‚æ–¹æ³•ã€æŠ½è±¡å·¥å‚ã€å»ºé€ è€…ã€åŸå‹
ç»“æ„å‹ï¼ˆ7ï¼‰ï¼šé€‚é…å™¨ã€æ¡¥æ¥ã€ç»„åˆã€è£…é¥°ã€å¤–è§‚ã€äº«å…ƒã€ä»£ç†
è¡Œä¸ºå‹ï¼ˆ12ï¼‰ï¼šè´£ä»»é“¾ã€å‘½ä»¤ã€è§£é‡Šå™¨ã€ä¸­ä»‹è€…ã€è¿­ä»£å™¨ã€å¤‡å¿˜å½•ã€è§‚å¯Ÿè€…ã€çŠ¶æ€ã€ç­–ç•¥ã€æ¨¡æ¿æ–¹æ³•ã€è®¿é—®è€…ã€å¤‡é€‰ï¼šç©ºå¯¹è±¡
```

## åˆ›å»ºå‹

### 1. å•ä¾‹ï¼ˆSingletonï¼‰

æœ¬è´¨ï¼šæ§åˆ¶å®ä¾‹å”¯ä¸€æ€§ä¸å…¨å±€è®¿é—®ç‚¹ã€‚

```
Client â†’ Singleton.getInstance() â†’ å”¯ä¸€å®ä¾‹
```

```java
public class Singleton {
    private static volatile Singleton INSTANCE;
    private Singleton() {}
    public static Singleton getInstance() {
        if (INSTANCE == null) {
            synchronized (Singleton.class) {
                if (INSTANCE == null) INSTANCE = new Singleton();
            }
        }
        return INSTANCE;
    }
}
```

æç¤ºï¼šä¼˜å…ˆæšä¸¾å¼å•ä¾‹æˆ–æƒ°æ€§ + DCL + volatileï¼›æ³¨æ„åºåˆ—åŒ–ä¸åå°„æ”»å‡»ã€‚

### 2. å·¥å‚æ–¹æ³•ï¼ˆFactory Methodï¼‰

æœ¬è´¨ï¼šå°†åˆ›å»ºå»¶è¿Ÿåˆ°å­ç±»ã€‚

```
Creator â”€â”€factory()â”€â”€â–¶ Product
  â–²  â–²
  â”‚  â””â”€ ConcreteCreatorA/B è¦†ç›–åˆ›å»º
```

```java
interface Product { String name(); }
class A implements Product { public String name(){return "A";} }
abstract class Creator { abstract Product factory(); }
class ACreator extends Creator { Product factory(){ return new A(); } }
```

æç¤ºï¼šå½“æ–°å¢äº§å“æ—¶ï¼Œä»…æ–°å¢å…·ä½“å·¥å‚å³å¯ï¼Œéµå¾ªå¼€é—­åŸåˆ™ã€‚

### 3. æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰

æœ¬è´¨ï¼šåŒä¸€äº§å“æ—çš„ä¸€ç»„å·¥å‚æ–¹æ³•ã€‚

```
GUIFactory â†’ createButton / createTextField
    â”œâ”€ WinFactory
    â””â”€ MacFactory
```

```java
interface Button { void draw(); }
interface TextField { void render(); }
interface GUIFactory { Button btn(); TextField tf(); }
class WinFactory implements GUIFactory { public Button btn(){return ()->{};} public TextField tf(){return ()->{};} }
```

æç¤ºï¼šåº”å¯¹å¤šç»´åº¦å˜åŒ–ï¼ˆå¹³å° Ã— ç»„ä»¶ï¼‰ï¼Œé…åˆä¾èµ–æ³¨å…¥æ›´çµæ´»ã€‚

### 4. å»ºé€ è€…ï¼ˆBuilderï¼‰

æœ¬è´¨ï¼šåˆ†æ­¥æ„å»ºå¤æ‚å¯¹è±¡ï¼Œè§£è€¦â€œæ„å»ºè¿‡ç¨‹ä¸è¡¨ç¤ºâ€ã€‚

```
Director â†’ Builder â†’ Product
```

```java
class User { final String name; final int age; User(String n,int a){name=n;age=a;} static class Builder{String n;int a; Builder name(String x){n=x;return this;} Builder age(int x){a=x;return this;} User build(){return new User(n,a);} } }
```

æç¤ºï¼šåœ¨ Java ä¸­å¸¸ç”¨æµå¼ APIï¼›é¿å…æ„é€ å™¨å‚æ•°çˆ†ç‚¸ã€‚

### 5. åŸå‹ï¼ˆPrototypeï¼‰

æœ¬è´¨ï¼šæ‹·è´è€Œéæ–°å»ºã€‚

```java
class Doc implements Cloneable { String text; public Doc clone(){ try{ return (Doc)super.clone(); }catch(Exception e){ throw new AssertionError(e);} } }
```

æç¤ºï¼šæµ…æ‹·è´/æ·±æ‹·è´è¦æ˜ç¡®ï¼›å¯ç”¨åºåˆ—åŒ–æˆ– MapStruct/æ‰‹å†™å¤åˆ¶ã€‚

## ç»“æ„å‹

### 6. é€‚é…å™¨ï¼ˆAdapterï¼‰

æœ¬è´¨ï¼šæ¥å£ä¸åŒ¹é…æ—¶çš„ä¸­é—´å±‚ã€‚

```
Client â†’ Target
           â–²
         Adapter â†’ Adaptee
```

```java
interface Target { void call(); }
class Adaptee { void specific(){ System.out.println("legacy"); } }
class Adapter implements Target { private final Adaptee a; Adapter(Adaptee a){this.a=a;} public void call(){ a.specific(); } }
```

### 7. æ¡¥æ¥ï¼ˆBridgeï¼‰

æœ¬è´¨ï¼šæŠ½è±¡ä¸å®ç°è§£è€¦ï¼Œç‹¬ç«‹æ‰©å±•ã€‚

```
Abstraction â”€â”€â”        Implementor
  â”” RefinedAbstraction  â”œâ”€ ImplA
                         â””â”€ ImplB
```

```java
interface Renderer { void draw(String s); }
abstract class Shape { protected Renderer r; Shape(Renderer r){this.r=r;} abstract void render(); }
class Circle extends Shape { Circle(Renderer r){super(r);} void render(){ r.draw("circle"); } }
```

### 8. ç»„åˆï¼ˆCompositeï¼‰

æœ¬è´¨ï¼šæ ‘å½¢ç»“æ„çš„ç»Ÿä¸€å¯¹å¾…ã€‚

```
Component
 â”œâ”€ Leaf
 â””â”€ Composite â†’ children[*]
```

```java
interface Node { void print(); }
class Leaf implements Node { public void print(){ System.out.println("leaf"); } }
class Composite implements Node { List<Node> children=new ArrayList<>(); public void print(){ children.forEach(Node::print);} }
```

### 9. è£…é¥°ï¼ˆDecoratorï¼‰

æœ¬è´¨ï¼šåœ¨ä¸æ”¹å˜æ¥å£çš„å‰æä¸‹å åŠ è¡Œä¸ºã€‚

```
Component â† Decorator â† ConcreteDecorator
```

```java
interface Cost { int price(); }
class Base implements Cost { public int price(){ return 10; } }
class Extra implements Cost { private final Cost c; Extra(Cost c){this.c=c;} public int price(){ return c.price()+3; } }
```

### 10. å¤–è§‚ï¼ˆFacadeï¼‰

æœ¬è´¨ï¼šä¸ºå¤æ‚å­ç³»ç»Ÿæä¾›ç»Ÿä¸€å…¥å£ã€‚

```java
class Facade { A a; B b; C c; void doAll(){ a.x(); b.y(); c.z(); } }
```

### 11. äº«å…ƒï¼ˆFlyweightï¼‰

æœ¬è´¨ï¼šå…±äº«ç»†ç²’åº¦å¯¹è±¡ï¼Œé™ä½å†…å­˜ã€‚

```java
class Flyweights { private static final Map<String, Glyph> cache = new ConcurrentHashMap<>(); static Glyph of(String k){ return cache.computeIfAbsent(k, Glyph::new);} }
```

### 12. ä»£ç†ï¼ˆProxyï¼‰

æœ¬è´¨ï¼šæ§åˆ¶è®¿é—®ï¼ˆè¿œç¨‹ã€ä¿æŠ¤ã€ç¼“å­˜ã€æ‡’åŠ è½½ï¼‰ã€‚

```java
interface Svc { String get(); }
class Real implements Svc { public String get(){ return "data"; } }
class CacheProxy implements Svc { private final Svc s; private String cache; CacheProxy(Svc s){this.s=s;} public String get(){ return cache!=null?cache:(cache=s.get()); } }
```

## è¡Œä¸ºå‹

### 13. è´£ä»»é“¾ï¼ˆChain of Responsibilityï¼‰

æœ¬è´¨ï¼šè¯·æ±‚åœ¨é“¾ä¸Šä¼ é€’ï¼Œç›´åˆ°è¢«å¤„ç†ã€‚

```java
abstract class Handler { private Handler next; Handler next(Handler n){this.next=n; return n;} void handle(String r){ if(!doHandle(r) && next!=null) next.handle(r);} abstract boolean doHandle(String r);} 
```

### 14. å‘½ä»¤ï¼ˆCommandï¼‰

æœ¬è´¨ï¼šå°†è¯·æ±‚å°è£…ä¸ºå¯¹è±¡ï¼Œæ”¯æŒæ’¤é”€/é˜Ÿåˆ—ã€‚

```java
interface Command { void exec(); }
class Print implements Command { public void exec(){ System.out.println("hi"); } }
class Invoker { void call(Command c){ c.exec(); } }
```

### 15. è§£é‡Šå™¨ï¼ˆInterpreterï¼‰

æœ¬è´¨ï¼šä¸ºè¯­è¨€å®šä¹‰æ–‡æ³•ä¸æ±‚å€¼ã€‚

```java
interface Expr { int eval(); }
class Num implements Expr { int v; Num(int v){this.v=v;} public int eval(){return v;} }
class Add implements Expr { Expr l,r; Add(Expr l,Expr r){this.l=l;this.r=r;} public int eval(){return l.eval()+r.eval();} }
```

### 16. ä¸­ä»‹è€…ï¼ˆMediatorï¼‰

æœ¬è´¨ï¼šå¯¹è±¡é€šè¿‡ä¸­ä»‹æ²Ÿé€šï¼Œé™ä½è€¦åˆã€‚

```java
interface Bus { void send(String ch, String msg); void on(String ch, Consumer<String> c); }
```

### 17. è¿­ä»£å™¨ï¼ˆIteratorï¼‰

æœ¬è´¨ï¼šé¡ºåºè®¿é—®èšåˆå¯¹è±¡è€Œæ— éœ€æš´éœ²å†…éƒ¨ã€‚

```java
for (var e : list) { /* ... */ }
```

### 18. å¤‡å¿˜å½•ï¼ˆMementoï¼‰

æœ¬è´¨ï¼šåœ¨ä¸ç ´åå°è£…çš„å‰æä¸‹ä¿å­˜ä¸æ¢å¤çŠ¶æ€ã€‚

```java
record M(String state){}
class Caretaker { Deque<M> stack = new ArrayDeque<>(); void save(M m){stack.push(m);} M undo(){return stack.pop();} }
```

### 19. è§‚å¯Ÿè€…ï¼ˆObserverï¼‰

æœ¬è´¨ï¼šå‘å¸ƒ-è®¢é˜…ï¼Œäº‹ä»¶é©±åŠ¨ã€‚

```java
interface Obs { void on(String msg); }
class Pub { List<Obs> os=new ArrayList<>(); void sub(Obs o){os.add(o);} void pub(String m){ os.forEach(o->o.on(m)); } }
```

### 20. çŠ¶æ€ï¼ˆStateï¼‰

æœ¬è´¨ï¼šå¯¹è±¡åœ¨ä¸åŒçŠ¶æ€ä¸‹è¡Œä¸ºä¸åŒï¼ŒçŠ¶æ€è½¬ç§»æ˜¾å¼åŒ–ã€‚

```
[Idle] --play--> [Playing] --pause--> [Paused]
```

```java
interface State { void handle(Player p); }
class Playing implements State { public void handle(Player p){ p.setState(new Paused()); } }
class Player { private State s; void setState(State s){this.s=s;} void press(){ s.handle(this);} }
```

### 21. ç­–ç•¥ï¼ˆStrategyï¼‰

æœ¬è´¨ï¼šåœ¨è¿è¡ŒæœŸåˆ‡æ¢ç®—æ³•ã€‚

```java
interface Pay { boolean exec(int cents); }
class Wechat implements Pay { public boolean exec(int c){ return true; } }
class Context { private Pay p; Context(Pay p){this.p=p;} boolean pay(int c){ return p.exec(c);} }
```

### 22. æ¨¡æ¿æ–¹æ³•ï¼ˆTemplate Methodï¼‰

æœ¬è´¨ï¼šå›ºå®šæµç¨‹éª¨æ¶ï¼Œå°†å¯å˜æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ã€‚

```java
abstract class Task { final void run(){ step1(); step2(); } abstract void step1(); abstract void step2(); }
```

### 23. è®¿é—®è€…ï¼ˆVisitorï¼‰

æœ¬è´¨ï¼šåœ¨ä¸æ”¹å˜å…ƒç´ ç±»çš„å‰æä¸‹ï¼Œä¸ºå…¶å¢åŠ æ–°æ“ä½œã€‚

```java
interface Visitor { void visit(File f); void visit(Dir d); }
interface NodeV { void accept(Visitor v); }
```

### 24. ç©ºå¯¹è±¡ï¼ˆNull Objectï¼‰

æœ¬è´¨ï¼šä»¥å¯¹è±¡æ›¿ä»£ nullï¼Œæ¶ˆé™¤æ¡ä»¶åˆ†æ”¯ã€‚

```java
interface Logger { void log(String m); }
class NopLogger implements Logger { public void log(String m){} }
```

## å®æˆ˜æ€»è§ˆï¼šç”¨ç­–ç•¥ + è´£ä»»é“¾ + è£…é¥°æ„å»ºæ”¯ä»˜å¼•æ“

```
Request â†’ è´£ä»»é“¾æ ¡éªŒ â†’ ç­–ç•¥è·¯ç”±ï¼ˆå¾®ä¿¡/æ”¯ä»˜å®/â€¦ï¼‰ â†’ è£…é¥°ï¼ˆé™æµ/å¹‚ç­‰/æ—¥å¿—ï¼‰ â†’ ç½‘å…³
```

è¦ç‚¹ï¼š
- å˜åŒ–éš”ç¦»ï¼šç®—æ³•ç”¨ç­–ç•¥ï¼Œæ ¡éªŒç”¨é“¾ï¼ŒéåŠŸèƒ½æ€§ç”¨è£…é¥°ï¼›
- ç»„åˆå¤šæ¨¡å¼ï¼Œæ§åˆ¶å¤æ‚åº¦ï¼›
- ä¿æŒæ¥å£è¯­ä¹‰ç¨³å®šï¼Œä¾¿äºæµ‹è¯•ä¸æ›¿æ¢ã€‚

## å¯¹ç…§è¡¨ï¼ˆä½•æ—¶é€‰å“ªä¸€ä¸ªï¼‰

- åˆ›å»ºå‹ï¼šå¯¹è±¡åˆ›å»ºå¤æ‚/å¤šå˜ â†’ å·¥å‚/å»ºé€ è€…ï¼›å”¯ä¸€æ€§ â†’ å•ä¾‹ï¼›å¤åˆ¶ â†’ åŸå‹ã€‚
- ç»“æ„å‹ï¼šæ¥å£ä¸å…¼å®¹ â†’ é€‚é…ï¼›æ¨ªå‘æ‰©å±•åŠŸèƒ½ â†’ è£…é¥°ï¼›å¤šç»´æ‰©å±• â†’ æ¡¥æ¥ï¼›æ ‘ç»“æ„ â†’ ç»„åˆï¼›å­ç³»ç»Ÿç®€åŒ– â†’ å¤–è§‚ï¼›å¯¹è±¡å¤§é‡é‡å¤ â†’ äº«å…ƒï¼›æ§åˆ¶è®¿é—® â†’ ä»£ç†ã€‚
- è¡Œä¸ºå‹ï¼šèŒè´£ä¼ é€’ â†’ è´£ä»»é“¾ï¼›å‘½ä»¤å¯æ’¤é”€/æ’é˜Ÿ â†’ å‘½ä»¤ï¼›çŠ¶æ€é©±åŠ¨ â†’ çŠ¶æ€ï¼›ç®—æ³•å¯æ›¿æ¢ â†’ ç­–ç•¥ï¼›å›ºå®šéª¨æ¶ â†’ æ¨¡æ¿ï¼›äº‹ä»¶é©±åŠ¨ â†’ è§‚å¯Ÿè€…ï¼›è·¨ç±»å‹æ“ä½œ â†’ è®¿é—®è€…ã€‚

---

æŒæ¡ 24 ç§æ¨¡å¼çš„å…³é”®åœ¨äºè¯†åˆ«â€œå˜åŒ–ç‚¹ä¸ç¨³å®šç‚¹â€ã€‚å»ºè®®é…åˆä½ çš„å®é™…é¡¹ç›®ï¼Œé€‰ 2-3 ä¸ªå…¸å‹åœºæ™¯åˆ†åˆ«ç”¨ä¸¤ç§ä¸åŒç»„åˆå®ç°å¹¶æ¯”è¾ƒå¤æ‚åº¦ä¸æ¼”è¿›æˆæœ¬ã€‚

## ä¸‹ä¸€æ­¥

- [æ•°æ®åº“ä¸ JDBC](/java/26-æ•°æ®åº“ä¸JDBC.md) - å­¦ä¹ æ•°æ®åº“æ“ä½œ
- [Spring æ¡†æ¶](/java/27-Springæ¡†æ¶.md) - å­¦ä¹  Spring æ¡†æ¶

---

<div style="text-align: center; margin-top: 2rem;">
  <p>ğŸ’¡ <strong>æç¤º</strong>ï¼šæ¨¡å¼ä¸æ˜¯ç›®çš„ï¼Œè§£å†³é—®é¢˜æ‰æ˜¯ã€‚é¿å…æœºæ¢°å¥—ç”¨ã€‚</p>
</div>
