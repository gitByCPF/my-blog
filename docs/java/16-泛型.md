# ğŸ”· æ³›å‹

## æ³›å‹æ¦‚è¿°

æ³›å‹ï¼ˆGenericsï¼‰æ˜¯ Java 5 å¼•å…¥çš„ç‰¹æ€§ï¼Œå…è®¸åœ¨å®šä¹‰ç±»ã€æ¥å£å’Œæ–¹æ³•æ—¶ä½¿ç”¨ç±»å‹å‚æ•°ï¼Œæé«˜ä»£ç çš„ç±»å‹å®‰å…¨æ€§å’Œå¯é‡ç”¨æ€§ã€‚

### æ³›å‹çš„å¥½å¤„

- **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹
- **ä»£ç å¤ç”¨**ï¼šä¸€ä¸ªç±»å¯ä»¥å¤„ç†å¤šç§ç±»å‹
- **æ¶ˆé™¤ç±»å‹è½¬æ¢**ï¼šè‡ªåŠ¨å¤„ç†ç±»å‹è½¬æ¢
- **æé«˜å¯è¯»æ€§**ï¼šä»£ç æ›´æ¸…æ™°

## æ³›å‹ç±»

### åŸºæœ¬è¯­æ³•

```java
// æ³›å‹ç±»å®šä¹‰
public class Box<T> {
    private T value;
    
    public void setValue(T value) {
        this.value = value;
    }
    
    public T getValue() {
        return value;
    }
}

// ä½¿ç”¨æ³›å‹ç±»
Box<String> stringBox = new Box<>();
stringBox.setValue("Hello");
String str = stringBox.getValue();

Box<Integer> intBox = new Box<>();
intBox.setValue(10);
Integer num = intBox.getValue();
```

### å¤šä¸ªç±»å‹å‚æ•°

```java
// å¤šä¸ªç±»å‹å‚æ•°
public class Pair<K, V> {
    private K key;
    private V value;
    
    public Pair(K key, V value) {
        this.key = key;
        this.value = value;
    }
    
    public K getKey() {
        return key;
    }
    
    public V getValue() {
        return value;
    }
}

// ä½¿ç”¨
Pair<String, Integer> pair = new Pair<>("age", 25);
String key = pair.getKey();
Integer value = pair.getValue();
```

## æ³›å‹æ¥å£

### åŸºæœ¬è¯­æ³•

```java
// æ³›å‹æ¥å£
public interface List<T> {
    void add(T item);
    T get(int index);
    int size();
}

// å®ç°æ³›å‹æ¥å£
public class ArrayList<T> implements List<T> {
    private T[] items;
    private int size;
    
    @Override
    public void add(T item) {
        // å®ç°
    }
    
    @Override
    public T get(int index) {
        return items[index];
    }
    
    @Override
    public int size() {
        return size;
    }
}
```

## æ³›å‹æ–¹æ³•

### åŸºæœ¬è¯­æ³•

```java
// æ³›å‹æ–¹æ³•
public class Util {
    public static <T> T getFirst(T[] array) {
        return array[0];
    }
    
    public static <T> void swap(T[] array, int i, int j) {
        T temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
}

// ä½¿ç”¨
String[] strArray = {"a", "b", "c"};
String first = Util.getFirst(strArray);

Integer[] intArray = {1, 2, 3};
Integer firstInt = Util.getFirst(intArray);
```

## ç±»å‹é€šé…ç¬¦

### ä¸Šç•Œé€šé…ç¬¦ï¼ˆ? extendsï¼‰

```java
// ä¸Šç•Œé€šé…ç¬¦ï¼šåªèƒ½è¯»å–ï¼Œä¸èƒ½å†™å…¥
public void process(List<? extends Number> list) {
    // åªèƒ½è¯»å–
    Number num = list.get(0);
    // âŒ ä¸èƒ½å†™å…¥
    // list.add(10);  // ç¼–è¯‘é”™è¯¯
}

// ä½¿ç”¨
List<Integer> intList = Arrays.asList(1, 2, 3);
process(intList);  // âœ… å¯ä»¥

List<Double> doubleList = Arrays.asList(1.0, 2.0, 3.0);
process(doubleList);  // âœ… å¯ä»¥
```

### ä¸‹ç•Œé€šé…ç¬¦ï¼ˆ? superï¼‰

```java
// ä¸‹ç•Œé€šé…ç¬¦ï¼šåªèƒ½å†™å…¥ï¼Œä¸èƒ½è¯»å–
public void addNumber(List<? super Integer> list) {
    list.add(10);  // âœ… å¯ä»¥å†™å…¥
    // âŒ ä¸èƒ½è¯»å–
    // Integer num = list.get(0);  // ç¼–è¯‘é”™è¯¯
}

// ä½¿ç”¨
List<Number> numberList = new ArrayList<>();
addNumber(numberList);  // âœ… å¯ä»¥

List<Object> objectList = new ArrayList<>();
addNumber(objectList);  // âœ… å¯ä»¥
```

### æ— ç•Œé€šé…ç¬¦ï¼ˆ?ï¼‰

```java
// æ— ç•Œé€šé…ç¬¦ï¼šåªèƒ½è¯»å–ï¼Œä¸èƒ½å†™å…¥
public void printList(List<?> list) {
    for (Object obj : list) {
        System.out.println(obj);
    }
    // âŒ ä¸èƒ½å†™å…¥
    // list.add("item");  // ç¼–è¯‘é”™è¯¯
}

// ä½¿ç”¨
List<String> strList = Arrays.asList("a", "b", "c");
printList(strList);  // âœ… å¯ä»¥

List<Integer> intList = Arrays.asList(1, 2, 3);
printList(intList);  // âœ… å¯ä»¥
```

## ç±»å‹æ“¦é™¤

### ç±»å‹æ“¦é™¤åŸç†

```java
// ç¼–è¯‘å‰
public class Box<T> {
    private T value;
    
    public void setValue(T value) {
        this.value = value;
    }
    
    public T getValue() {
        return value;
    }
}

// ç¼–è¯‘åï¼ˆç±»å‹æ“¦é™¤ï¼‰
public class Box {
    private Object value;
    
    public void setValue(Object value) {
        this.value = value;
    }
    
    public Object getValue() {
        return value;
    }
}
```

### ç±»å‹æ“¦é™¤çš„å½±å“

```java
// âŒ ä¸èƒ½åˆ›å»ºæ³›å‹æ•°ç»„
// T[] array = new T[10];  // ç¼–è¯‘é”™è¯¯

// âœ… ä½¿ç”¨ Object æ•°ç»„
Object[] array = new Object[10];

// âŒ ä¸èƒ½ä½¿ç”¨ instanceof
// if (obj instanceof Box<String>) { }  // ç¼–è¯‘é”™è¯¯

// âœ… ä½¿ç”¨åŸå§‹ç±»å‹
if (obj instanceof Box) { }  // å¯ä»¥
```

## æ³›å‹é™åˆ¶

### ä¸èƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹

```java
// âŒ é”™è¯¯ï¼šä¸èƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹
// Box<int> box = new Box<>();  // ç¼–è¯‘é”™è¯¯

// âœ… æ­£ç¡®ï¼šä½¿ç”¨åŒ…è£…ç±»
Box<Integer> box = new Box<>();
```

### ä¸èƒ½åˆ›å»ºæ³›å‹æ•°ç»„

```java
// âŒ é”™è¯¯ï¼šä¸èƒ½åˆ›å»ºæ³›å‹æ•°ç»„
// List<String>[] lists = new List<String>[10];  // ç¼–è¯‘é”™è¯¯

// âœ… æ­£ç¡®ï¼šä½¿ç”¨é€šé…ç¬¦
List<?>[] lists = new List<?>[10];
```

### ä¸èƒ½å®ä¾‹åŒ–ç±»å‹å‚æ•°

```java
// âŒ é”™è¯¯ï¼šä¸èƒ½å®ä¾‹åŒ–ç±»å‹å‚æ•°
// public class Box<T> {
//     private T value = new T();  // ç¼–è¯‘é”™è¯¯
// }

// âœ… æ­£ç¡®ï¼šä½¿ç”¨åå°„æˆ–å·¥å‚æ–¹æ³•
public class Box<T> {
    private T value;
    
    public Box(Class<T> clazz) throws Exception {
        this.value = clazz.newInstance();
    }
}
```

## å®Œæ•´ç¤ºä¾‹

```java
// æ³›å‹ç±»
public class GenericBox<T> {
    private T value;
    
    public GenericBox(T value) {
        this.value = value;
    }
    
    public void setValue(T value) {
        this.value = value;
    }
    
    public T getValue() {
        return value;
    }
}

// æ³›å‹æ–¹æ³•
public class GenericUtil {
    public static <T> T getFirst(List<T> list) {
        return list.isEmpty() ? null : list.get(0);
    }
    
    public static <T extends Comparable<T>> T max(T a, T b) {
        return a.compareTo(b) > 0 ? a : b;
    }
}

// ä½¿ç”¨
public class GenericExample {
    public static void main(String[] args) {
        // æ³›å‹ç±»
        GenericBox<String> stringBox = new GenericBox<>("Hello");
        String str = stringBox.getValue();
        
        GenericBox<Integer> intBox = new GenericBox<>(10);
        Integer num = intBox.getValue();
        
        // æ³›å‹æ–¹æ³•
        List<String> strList = Arrays.asList("a", "b", "c");
        String first = GenericUtil.getFirst(strList);
        
        Integer max = GenericUtil.max(5, 10);
    }
}
```

## æœ€ä½³å®è·µ

### 1. ä½¿ç”¨æœ‰æ„ä¹‰çš„ç±»å‹å‚æ•°å

```java
// âœ… å¥½çš„åšæ³•ï¼šä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°
public class Box<T> { }
public class Map<K, V> { }
public class Pair<First, Second> { }

// âŒ ä¸å¥½çš„åšæ³•ï¼šä½¿ç”¨å•ä¸ªå­—æ¯ï¼ˆé™¤éæ˜¯æƒ¯ç”¨ï¼‰
public class Box<T1> { }
```

### 2. ä¼˜å…ˆä½¿ç”¨é€šé…ç¬¦

```java
// âœ… å¥½çš„åšæ³•ï¼šä½¿ç”¨é€šé…ç¬¦æé«˜çµæ´»æ€§
public void process(List<? extends Number> list) { }

// âŒ ä¸å¥½çš„åšæ³•ï¼šä½¿ç”¨å…·ä½“ç±»å‹é™åˆ¶çµæ´»æ€§
public void process(List<Integer> list) { }
```

### 3. é¿å…åŸå§‹ç±»å‹

```java
// âŒ ä¸å¥½çš„åšæ³•ï¼šä½¿ç”¨åŸå§‹ç±»å‹
List list = new ArrayList();

// âœ… å¥½çš„åšæ³•ï¼šä½¿ç”¨æ³›å‹
List<String> list = new ArrayList<>();
```

## ä¸‹ä¸€æ­¥

æŒæ¡äº†æ³›å‹åï¼Œå¯ä»¥ç»§ç»­å­¦ä¹ ï¼š

- [æšä¸¾ä¸æ³¨è§£](/java/17-æšä¸¾ä¸æ³¨è§£.md) - å­¦ä¹ æšä¸¾å’Œæ³¨è§£
- [å¤šçº¿ç¨‹åŸºç¡€](/java/18-å¤šçº¿ç¨‹åŸºç¡€.md) - å­¦ä¹ å¤šçº¿ç¨‹ç¼–ç¨‹

---

<div style="text-align: center; margin-top: 2rem;">
  <p>ğŸ’¡ <strong>æç¤º</strong>ï¼šæ³›å‹æä¾›äº†ç±»å‹å®‰å…¨å’Œä»£ç å¤ç”¨ï¼Œåˆç†ä½¿ç”¨æ³›å‹å¯ä»¥ç¼–å†™æ›´ä¼˜é›…çš„ä»£ç </p>
</div>
