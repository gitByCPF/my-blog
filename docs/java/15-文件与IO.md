# ğŸ“ æ–‡ä»¶ä¸IO

## IO æ¦‚è¿°

Java IOï¼ˆInput/Outputï¼‰ç”¨äºå¤„ç†è¾“å…¥è¾“å‡ºæ“ä½œï¼ŒåŒ…æ‹¬æ–‡ä»¶è¯»å†™ã€ç½‘ç»œé€šä¿¡ç­‰ã€‚

### IO æµç±»å‹

- **å­—èŠ‚æµ**ï¼šå¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼ˆInputStream/OutputStreamï¼‰
- **å­—ç¬¦æµ**ï¼šå¤„ç†æ–‡æœ¬æ•°æ®ï¼ˆReader/Writerï¼‰
- **ç¼“å†²æµ**ï¼šæé«˜ IO æ€§èƒ½ï¼ˆBufferedInputStream/BufferedWriterï¼‰
- **å¯¹è±¡æµ**ï¼šåºåˆ—åŒ–å¯¹è±¡ï¼ˆObjectInputStream/ObjectOutputStreamï¼‰

## File ç±»

### æ–‡ä»¶æ“ä½œ

```java
// åˆ›å»º File å¯¹è±¡
File file = new File("file.txt");
File dir = new File("directory");

// æ£€æŸ¥æ–‡ä»¶å’Œç›®å½•
boolean exists = file.exists();
boolean isFile = file.isFile();
boolean isDirectory = file.isDirectory();

// åˆ›å»ºæ–‡ä»¶å’Œç›®å½•
boolean created = file.createNewFile();  // åˆ›å»ºæ–‡ä»¶
boolean dirCreated = dir.mkdir();        // åˆ›å»ºç›®å½•
boolean dirsCreated = dir.mkdirs();      // åˆ›å»ºå¤šçº§ç›®å½•

// åˆ é™¤
boolean deleted = file.delete();

// è·å–ä¿¡æ¯
String name = file.getName();
String path = file.getPath();
String absolutePath = file.getAbsolutePath();
long size = file.length();
long lastModified = file.lastModified();

// åˆ—å‡ºç›®å½•å†…å®¹
String[] files = dir.list();
File[] fileList = dir.listFiles();
```

## å­—èŠ‚æµ

### FileInputStreamï¼ˆæ–‡ä»¶è¾“å…¥æµï¼‰

```java
// è¯»å–æ–‡ä»¶
FileInputStream fis = null;
try {
    fis = new FileInputStream("file.txt");
    int data;
    while ((data = fis.read()) != -1) {
        System.out.print((char) data);
    }
} catch (IOException e) {
    System.out.println("è¯»å–å¤±è´¥: " + e.getMessage());
} finally {
    if (fis != null) {
        try {
            fis.close();
        } catch (IOException e) {
            System.out.println("å…³é—­å¤±è´¥: " + e.getMessage());
        }
    }
}

// ä½¿ç”¨ try-with-resources
try (FileInputStream fis = new FileInputStream("file.txt")) {
    int data;
    while ((data = fis.read()) != -1) {
        System.out.print((char) data);
    }
} catch (IOException e) {
    System.out.println("è¯»å–å¤±è´¥: " + e.getMessage());
}
```

### FileOutputStreamï¼ˆæ–‡ä»¶è¾“å‡ºæµï¼‰

```java
// å†™å…¥æ–‡ä»¶
try (FileOutputStream fos = new FileOutputStream("file.txt")) {
    String content = "Hello World";
    fos.write(content.getBytes());
} catch (IOException e) {
    System.out.println("å†™å…¥å¤±è´¥: " + e.getMessage());
}

// è¿½åŠ æ¨¡å¼
try (FileOutputStream fos = new FileOutputStream("file.txt", true)) {
    String content = "\nè¿½åŠ å†…å®¹";
    fos.write(content.getBytes());
} catch (IOException e) {
    System.out.println("è¿½åŠ å¤±è´¥: " + e.getMessage());
}
```

## å­—ç¬¦æµ

### FileReaderï¼ˆæ–‡ä»¶è¯»å–å™¨ï¼‰

```java
// è¯»å–æ–‡æœ¬æ–‡ä»¶
try (FileReader fr = new FileReader("file.txt")) {
    int data;
    while ((data = fr.read()) != -1) {
        System.out.print((char) data);
    }
} catch (IOException e) {
    System.out.println("è¯»å–å¤±è´¥: " + e.getMessage());
}
```

### FileWriterï¼ˆæ–‡ä»¶å†™å…¥å™¨ï¼‰

```java
// å†™å…¥æ–‡æœ¬æ–‡ä»¶
try (FileWriter fw = new FileWriter("file.txt")) {
    fw.write("Hello World");
} catch (IOException e) {
    System.out.println("å†™å…¥å¤±è´¥: " + e.getMessage());
}

// è¿½åŠ æ¨¡å¼
try (FileWriter fw = new FileWriter("file.txt", true)) {
    fw.write("\nè¿½åŠ å†…å®¹");
} catch (IOException e) {
    System.out.println("è¿½åŠ å¤±è´¥: " + e.getMessage());
}
```

## ç¼“å†²æµ

### BufferedReaderï¼ˆç¼“å†²è¯»å–å™¨ï¼‰

```java
// ä½¿ç”¨ç¼“å†²è¯»å–
try (BufferedReader br = new BufferedReader(new FileReader("file.txt"))) {
    String line;
    while ((line = br.readLine()) != null) {
        System.out.println(line);
    }
} catch (IOException e) {
    System.out.println("è¯»å–å¤±è´¥: " + e.getMessage());
}
```

### BufferedWriterï¼ˆç¼“å†²å†™å…¥å™¨ï¼‰

```java
// ä½¿ç”¨ç¼“å†²å†™å…¥
try (BufferedWriter bw = new BufferedWriter(new FileWriter("file.txt"))) {
    bw.write("ç¬¬ä¸€è¡Œ");
    bw.newLine();  // æ¢è¡Œ
    bw.write("ç¬¬äºŒè¡Œ");
} catch (IOException e) {
    System.out.println("å†™å…¥å¤±è´¥: " + e.getMessage());
}
```

## å¯¹è±¡æµï¼ˆåºåˆ—åŒ–ï¼‰

### åºåˆ—åŒ–å¯¹è±¡

```java
// å®ç° Serializable æ¥å£
public class Person implements Serializable {
    private static final long serialVersionUID = 1L;
    private String name;
    private int age;
    
    // æ„é€ æ–¹æ³•ã€getterã€setter...
}

// åºåˆ—åŒ–å¯¹è±¡åˆ°æ–‡ä»¶
try (ObjectOutputStream oos = new ObjectOutputStream(
        new FileOutputStream("person.dat"))) {
    Person person = new Person("å¼ ä¸‰", 25);
    oos.writeObject(person);
} catch (IOException e) {
    System.out.println("åºåˆ—åŒ–å¤±è´¥: " + e.getMessage());
}
```

### ååºåˆ—åŒ–å¯¹è±¡

```java
// ä»æ–‡ä»¶ååºåˆ—åŒ–å¯¹è±¡
try (ObjectInputStream ois = new ObjectInputStream(
        new FileInputStream("person.dat"))) {
    Person person = (Person) ois.readObject();
    System.out.println("å§“å: " + person.getName());
    System.out.println("å¹´é¾„: " + person.getAge());
} catch (IOException | ClassNotFoundException e) {
    System.out.println("ååºåˆ—åŒ–å¤±è´¥: " + e.getMessage());
}
```

## NIOï¼ˆJava 7+ï¼‰

### Files ç±»

```java
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.StandardCopyOption;

// è¯»å–æ–‡ä»¶
Path path = Paths.get("file.txt");
try {
    byte[] bytes = Files.readAllBytes(path);
    String content = new String(bytes);
    System.out.println(content);
    
    // è¯»å–æ‰€æœ‰è¡Œ
    List<String> lines = Files.readAllLines(path);
    for (String line : lines) {
        System.out.println(line);
    }
} catch (IOException e) {
    System.out.println("è¯»å–å¤±è´¥: " + e.getMessage());
}

// å†™å…¥æ–‡ä»¶
try {
    String content = "Hello World";
    Files.write(path, content.getBytes());
    
    // å†™å…¥å¤šè¡Œ
    List<String> lines = Arrays.asList("ç¬¬ä¸€è¡Œ", "ç¬¬äºŒè¡Œ");
    Files.write(path, lines);
} catch (IOException e) {
    System.out.println("å†™å…¥å¤±è´¥: " + e.getMessage());
}

// å¤åˆ¶æ–‡ä»¶
try {
    Path source = Paths.get("source.txt");
    Path target = Paths.get("target.txt");
    Files.copy(source, target, StandardCopyOption.REPLACE_EXISTING);
} catch (IOException e) {
    System.out.println("å¤åˆ¶å¤±è´¥: " + e.getMessage());
}

// ç§»åŠ¨æ–‡ä»¶
try {
    Path source = Paths.get("source.txt");
    Path target = Paths.get("target.txt");
    Files.move(source, target, StandardCopyOption.REPLACE_EXISTING);
} catch (IOException e) {
    System.out.println("ç§»åŠ¨å¤±è´¥: " + e.getMessage());
}

// åˆ é™¤æ–‡ä»¶
try {
    Files.delete(path);
} catch (IOException e) {
    System.out.println("åˆ é™¤å¤±è´¥: " + e.getMessage());
}
```

## å®Œæ•´ç¤ºä¾‹

```java
public class IOExample {
    // è¯»å–æ–‡ä»¶
    public static void readFile(String filename) {
        try (BufferedReader br = new BufferedReader(new FileReader(filename))) {
            String line;
            while ((line = br.readLine()) != null) {
                System.out.println(line);
            }
        } catch (IOException e) {
            System.out.println("è¯»å–å¤±è´¥: " + e.getMessage());
        }
    }
    
    // å†™å…¥æ–‡ä»¶
    public static void writeFile(String filename, String content) {
        try (BufferedWriter bw = new BufferedWriter(new FileWriter(filename))) {
            bw.write(content);
        } catch (IOException e) {
            System.out.println("å†™å…¥å¤±è´¥: " + e.getMessage());
        }
    }
    
    // å¤åˆ¶æ–‡ä»¶
    public static void copyFile(String source, String target) {
        try (FileInputStream fis = new FileInputStream(source);
             FileOutputStream fos = new FileOutputStream(target)) {
            byte[] buffer = new byte[1024];
            int length;
            while ((length = fis.read(buffer)) != -1) {
                fos.write(buffer, 0, length);
            }
        } catch (IOException e) {
            System.out.println("å¤åˆ¶å¤±è´¥: " + e.getMessage());
        }
    }
    
    public static void main(String[] args) {
        // å†™å…¥æ–‡ä»¶
        writeFile("test.txt", "Hello World\nç¬¬äºŒè¡Œ");
        
        // è¯»å–æ–‡ä»¶
        readFile("test.txt");
        
        // å¤åˆ¶æ–‡ä»¶
        copyFile("test.txt", "copy.txt");
    }
}
```

## æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ try-with-resources

```java
// âœ… å¥½çš„åšæ³•ï¼šè‡ªåŠ¨å…³é—­èµ„æº
try (FileInputStream fis = new FileInputStream("file.txt")) {
    // ä½¿ç”¨èµ„æº
} catch (IOException e) {
    // å¤„ç†å¼‚å¸¸
}
```

### 2. ä½¿ç”¨ç¼“å†²æµæé«˜æ€§èƒ½

```java
// âœ… å¥½çš„åšæ³•ï¼šä½¿ç”¨ç¼“å†²æµ
try (BufferedReader br = new BufferedReader(new FileReader("file.txt"))) {
    // è¯»å–æ–‡ä»¶
}

// âŒ ä¸å¥½çš„åšæ³•ï¼šç›´æ¥ä½¿ç”¨å­—ç¬¦æµï¼ˆæ€§èƒ½è¾ƒå·®ï¼‰
try (FileReader fr = new FileReader("file.txt")) {
    // è¯»å–æ–‡ä»¶
}
```

### 3. ä½¿ç”¨ NIO Files ç±»ï¼ˆJava 7+ï¼‰

```java
// âœ… å¥½çš„åšæ³•ï¼šä½¿ç”¨ Files ç±»
Path path = Paths.get("file.txt");
List<String> lines = Files.readAllLines(path);
```

## ä¸‹ä¸€æ­¥

æŒæ¡äº†æ–‡ä»¶ä¸IOåï¼Œå¯ä»¥ç»§ç»­å­¦ä¹ ï¼š

- [æ³›å‹](/java/16-æ³›å‹.md) - å­¦ä¹ æ³›å‹çš„ä½¿ç”¨
- [æšä¸¾ä¸æ³¨è§£](/java/17-æšä¸¾ä¸æ³¨è§£.md) - å­¦ä¹ æšä¸¾å’Œæ³¨è§£

---

<div style="text-align: center; margin-top: 2rem;">
  <p>ğŸ’¡ <strong>æç¤º</strong>ï¼šæ–‡ä»¶IOæ˜¯ç¨‹åºå¼€å‘çš„é‡è¦éƒ¨åˆ†ï¼Œé€‰æ‹©åˆé€‚çš„IOæµå¯ä»¥æé«˜ç¨‹åºæ€§èƒ½</p>
</div>
